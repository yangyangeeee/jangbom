<a href="javascript:history.back()">â—</a>
<a href="{% url 'food:cart_view' %}">ğŸ§º
        {% if cart_items_count == 0 %}
        {% else %}
            {{ cart_items_count }}
        {% endif %}
    </a>
    <a href="{% url 'point:barcode' %}">ë°”ì½”ë“œ</a>
    {{ total_point }}P

<h2>ë‚˜ì˜ ì ë¦½ ë‚´ì—­</h2>
<a href="{% url 'food:main' %}">ì¥ ë³´ëŸ¬ ê°€ê¸°</a><br><br>

{% with period=selected.period|default:'1m' sort=selected.sort|default:'latest' %}
<form method="get" style="display:flex; gap:12px; align-items:center; margin-bottom:12px;">
    <!-- ê¸°ê°„ -->
    <select name="period" onchange="this.form.submit()">
        <option value="1m"  {% if period == '1m'  %}selected{% endif %}>ìµœê·¼ 1ê°œì›”</option>
        <option value="3m"  {% if period == '3m'  %}selected{% endif %}>ìµœê·¼ 3ê°œì›”</option>
        <option value="6m"  {% if period == '6m'  %}selected{% endif %}>ìµœê·¼ 6ê°œì›”</option>
        <option value="1y"  {% if period == '1y'  %}selected{% endif %}>ìµœê·¼ 1ë…„</option>
        <option value="all" {% if period == 'all' %}selected{% endif %}>ì „ì²´</option>
    </select>

    <!-- ì •ë ¬ -->
    <label>
        <input type="radio" name="sort" value="latest" onchange="this.form.submit()" {% if sort == 'latest' %}checked{% endif %}>
        ìµœì‹ ìˆœ
    </label>
    <label>
        <input type="radio" name="sort" value="points" onchange="this.form.submit()" {% if sort == 'points' %}checked{% endif %}>
        ê¸ˆì•¡ìˆœ
    </label>
</form>
{% endwith %}

<!-- ìš”ì•½(ìˆìœ¼ë©´ í‘œì‹œ) -->
{% if summary %}
    <div style="margin-bottom:8px;">
        ì´ ì ë¦½: {{ summary.total_points|default:0 }} P / {{ summary.count|default:0 }}ê±´
    </div>
{% endif %}

<table>
    <thead>
        <tr>
            <th>ì¼ì</th>
            <th>ë§ˆíŠ¸</th>
            <th>í¬ì¸íŠ¸</th>
            <th>ì„¸ë¶€</th>
        </tr>
    </thead>
    <tbody>
        {% for log in logs %}
        <tr>
            <td>{{ log.visited_at|date:"Y.m.d" }}</td>
            <td>
                {% if log.shopping_list.market %}
                    {{ log.shopping_list.market.name }}
                {% else %}
                    -
                {% endif %}
            </td>
            <td>+{{ log.point_earned }}P</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4">ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

