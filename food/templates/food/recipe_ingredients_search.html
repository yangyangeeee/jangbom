 <html>
<body>
  <a href="{% url 'food:cancel_ingredient_search' %}" aria-label="ë’¤ë¡œê°€ê¸°">âœ•</a>

  <h2>ì¬ë£Œ ì§ì ‘ ë‹´ê¸°</h2>
  <p>ë”°ë¡œ êµ¬ë§¤í•  ì¬ë£Œê°€ ìˆë‹¤ë©´ ì§ì ‘ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>

  <!-- ì¬ë£Œ ê²€ìƒ‰ (GET) -->
  <form method="get" action="{% url 'food:ingredient_search' %}">
    <input type="text" name="search" value="{{ search_query|default:'' }}">
    <button type="submit" name="action" value="search">ğŸ”</button>
  </form>
  <!-- ê²€ìƒ‰ ê²°ê³¼: ì²´í¬ ì¦‰ì‹œ ì¶”ê°€ (ê° í•­ëª© ê°œë³„ í¼) -->
  {% if category_ingredients %}
    <ul>
      {% for ing in category_ingredients %}
        <li>
          <form method="post" action="{% url 'food:add_extra_ingredient' %}">
            {% csrf_token %}
            <input type="hidden" name="search" value="{{ request.GET.search }}">
            <label>
              <input type="checkbox" name="ingredient" value="{{ ing.name }}" onchange="this.form.submit()">
              {{ ing.name }}
            </label>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% endif %}

  <hr>

  <!-- ìµœê·¼ ê²€ìƒ‰ì–´ (ìµœëŒ€ ì—¬ì„¯ ê°œì˜ ë‹¨ì–´ê¹Œì§€ë§Œ ë…¸ì¶œ)-->
  <h3>ìµœê·¼ ê²€ìƒ‰ì–´</h3>
  <div>
    {% if recent_searches %}
      <a href="{% url 'food:clear_recent_searches' %}">ì „ì²´ì‚­ì œ</a><br>
      {% for word in recent_searches %}
        <span style="margin-right:12px;">
          <a href="{% url 'food:ingredient_search' %}?search={{ word|urlencode }}">{{ word }}</a>
          <a href="{% url 'food:delete_recent_search' word %}" aria-label="{{ word }} ì‚­ì œ">Ã—</a>
        </span>
      {% endfor %}
    {% else %}
      <span>ìµœê·¼ ê²€ìƒ‰ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.</span>
    {% endif %}
  </div>

  <hr>

  <!-- ì¥ë°”êµ¬ë‹ˆ(í™•ì •ëœ í•­ëª©: optional_selected ê¸°ì¤€) -->
  <ul>
    {% for ing in selected_ingredients %}
        <!-- ì‚­ì œ: ì„¸ì…˜+DB ë™ì‹œì— ì œê±°, ê²€ìƒ‰ì–´ ìœ ì§€ -->
        <form method="post" action="{% url 'food:delete_extra_ingredient' ing.name %}">
          {% csrf_token %}
          <input type="hidden" name="search" value="{{ request.GET.search }}">
          <!-- ë²„íŠ¼ì„ í…ìŠ¤íŠ¸ì²˜ëŸ¼ ë³´ì´ê²Œ -->
          <button type="submit" style="background:none;border:none;padding:0;cursor:pointer;text-decoration:underline;">
            {{ ing.name }} âœ•
          </button>
        </form>
    {% empty %}
      ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ì¬ë£Œê°€ ì—†ìŠµë‹ˆë‹¤.
    {% endfor %}
  </ul>

  <hr>

  <!-- ì‘ì—… ë§ˆë¬´ë¦¬í•˜ê³  ë ˆì‹œí”¼ ì¬ë£Œ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ê³  ì‹¶ì„ ë•Œ -->
  <a href="{% url 'food:recipe_ingredients' %}">ì™„ë£Œ</a>

  <!-- ë©”ì‹œì§€ ì˜ì—­ -->
  {% if messages %}
    <ul>
      {% for message in messages %}
        {{ message }}
      {% endfor %}
    </ul>
  {% endif %}

</body>
</html>